loadable_module("node_yue") {
  output_name = "yue"
  output_extension = "node"

  deps = [
    "//nativeui",
  ]

  sources = [
    "test.cc",
  ]

  defines = [
    "USING_UV_SHARED=1",
    "USING_V8_SHARED=1",
    "BUILDING_NODE_EXTENSION",
  ]

  node_version = getenv("NODE_VERSION")

  include_dirs = [
    "//third_party/node-" + node_version + "/include/node"
  ]

  if (is_mac) {
    ldflags = [
      "-undefined",
      "dynamic_lookup",
    ]
  }
}
